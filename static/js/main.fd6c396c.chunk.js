(this["webpackJsonpspotify-playlist-organizer"]=this["webpackJsonpspotify-playlist-organizer"]||[]).push([[0],{21:function(t,e,a){t.exports=a.p+"static/media/record.6264d8cb.webp"},22:function(t,e,a){t.exports=a(49)},27:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){},49:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(20),i=a.n(s),o=(a(27),a(2)),c=a.n(o),l=a(9),u=a(4),p=a(5),h=a(8),m=a(7),g=a(6),d=a(3),y=a.n(d),f=a(21),k={album:{images:[{url:a.n(f).a}]},name:"Title",artists:[{name:"No Artist"}],duration_ms:0},b=["user-top-read","user-read-currently-playing","user-modify-playback-state"],v=(a(46),a(10)),_=(a(47),function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).stepBack=function(){n.props.stepBack()},n.togglePlay=function(){n.props.togglePlay()},n.stepForward=function(){n.props.stepForward()},n}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"controller"},r.a.createElement("button",{onClick:this.stepBack.bind(this)},r.a.createElement(v.d,null)),r.a.createElement("button",{onClick:this.togglePlay.bind(this),className:"centerButton"}," ",this.props.is_playing?r.a.createElement(v.a,null):r.a.createElement(v.b,null)," "),r.a.createElement("button",{onClick:this.stepForward.bind(this)},r.a.createElement(v.c,null)))}}]),a}(n.Component)),w=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(t){var n;return Object(u.a)(this,a),(n=e.call(this,t)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){var t=this,e={backgroundImage:"url(".concat(this.props.item.album.images[0].url,")")},a={width:100*this.props.progress_ms/this.props.item.duration_ms+"%"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("div",{className:"background",style:e})," ",r.a.createElement("div",{className:"now-playing__img"},r.a.createElement("img",{alt:this.props.item.album.artists?"Now playing ".concat(this.props.item.name," by ").concat("".concat(t.props.item.artists.reduce((function(t,e){return t+e.name+", "}),"")).slice(0,-2)).slice(0,-2):"Nothing currently playing",src:this.props.item.album.images[0].url})),r.a.createElement("div",{className:"now-playing__side"},r.a.createElement("div",{className:"now-playing__name"},this.props.item.name),r.a.createElement("div",{className:"now-playing__artist"},"".concat(this.props.item.artists.reduce((function(t,e){return t+e.name+", "}),"")).slice(0,-2)),r.a.createElement("div",{className:"now-playing__status"},this.props.is_playing?"Playing":"Paused"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress__bar",style:a})),r.a.createElement(_,{className:"control",is_playing:this.props.is_playing,stepBack:this.props.stepBack.bind(this),stepForward:this.props.stepForward.bind(this),togglePlay:this.props.togglePlay.bind(this)}))))}}]),a}(r.a.Component),E=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t}),{});a(48);window.location.hash="";var j="https://api.spotify.com/v1/me/player/",B=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={token:null,item:k,progress_ms:0},t.getCurrentlyPlaying=t.getCurrentlyPlaying.bind(Object(h.a)(t)),t.tick=t.tick.bind(Object(h.a)(t)),t}return Object(p.a)(a,[{key:"stepBack",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2e4,!(this.state.progress_ms<2e4)){t.next=6;break}return t.next=4,y.a.post("".concat(j,"previous"),{},{headers:{Authorization:"Bearer "+this.state.token}}).catch((function(t){return console.log(t)}));case 4:t.next=8;break;case 6:return t.next=8,y.a.put("".concat(j,"seek"),{},{headers:{Authorization:"Bearer "+this.state.token},params:{position_ms:0}}).catch((function(t){return console.log(t)}));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stepForward",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.post("".concat(j,"next"),{},{headers:{Authorization:"Bearer "+this.state.token}}).catch((function(t){return console.log(t)}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"togglePlay",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.state.is_playing){t.next=5;break}return t.next=3,y.a.put("".concat(j,"pause"),{},{headers:{Authorization:"Bearer "+this.state.token}}).catch((function(t){return console.log(t)}));case 3:t.next=7;break;case 5:return t.next=7,y.a.put("".concat(j,"play"),{},{headers:{Authorization:"Bearer "+this.state.token}}).catch((function(t){return console.log(t)}));case 7:this.setState({is_playing:!this.state.is_playing});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getCurrentlyPlaying",value:function(){var t=Object(l.a)(c.a.mark((function t(e){var a=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Getting current song"),t.next=3,y.a.get(j,{headers:{Authorization:"Bearer "+e}}).then((function(t){t.data?(a.setState({item:t.data.item,is_playing:t.data.is_playing}),Math.abs(a.state.progress_ms-t.data.progress_ms)>2e3&&a.setState({progress_ms:t.data.progress_ms})):a.setState({item:k,progress_ms:0})})).catch((function(t){return console.log(t)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=this,e=E.access_token;e&&this.setState({token:e}),this.getCurrentlyPlaying(e),this.barInterval=setInterval((function(){return t.updateBar()}),500),this.interval=setInterval((function(){return t.tick()}),7e3)}},{key:"updateBar",value:function(){this.state.token&&this.state.is_playing&&this.setState({progress_ms:this.state.progress_ms+500})}},{key:"tick",value:function(){this.state.token&&this.getCurrentlyPlaying(this.state.token)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},!this.state.token&&r.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("316e898df20d4a0d8c486499c9dc7abf","&redirect_uri=").concat("http://kevinjiang.ca/Spotify-Web-Player","&scope=").concat(b.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify"),this.state.token&&r.a.createElement(w,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms,stepBack:this.stepBack.bind(this),stepForward:this.stepForward.bind(this),togglePlay:this.togglePlay.bind(this)})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.fd6c396c.chunk.js.map
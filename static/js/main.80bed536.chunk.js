(this["webpackJsonpspotify-playlist-organizer"]=this["webpackJsonpspotify-playlist-organizer"]||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/record.6264d8cb.webp"},26:function(e,t,a){e.exports=a(56)},31:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(23),o=a.n(s),i=(a(31),a(3)),c=a.n(i),l=a(11),u=a(6),p=a(7),m=a(9),g=a(8),h=a(5),d=a.n(h),y=a(4),f=a.n(y),b=a(24),k={album:{images:[{url:a.n(b).a}]},name:"Title",artists:[{name:"No Artist"}],duration_ms:0},v=a(10),E=[v.a.userTopRead,v.a.userReadCurrentlyPlaying,v.a.userModifyPlaybackState],_=(a(51),a(12)),w=(a(52),function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).stepBack=function(){e.props.stepBack()},e.togglePlay=function(){e.props.togglePlay()},e.stepForward=function(){e.props.stepForward()},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"controller"},r.a.createElement("button",{onClick:this.stepBack},r.a.createElement(_.d,null)),r.a.createElement("button",{onClick:this.togglePlay,className:"centerButton"}," ",this.props.is_playing?r.a.createElement(_.a,null):r.a.createElement(_.b,null)," "),r.a.createElement("button",{onClick:this.stepForward},r.a.createElement(_.c,null)))}}]),a}(n.Component)),N=a(25),P=a(13),x=(a(53),function(e){var t=Object(n.useState)(!1),a=Object(N.a)(t,2),s=a[0],o=a[1];return r.a.createElement("div",{className:"monthly-playlist monthly-playlist".concat(s?"--extended":"--hidden")},r.a.createElement("div",{className:"pullout-wrapper"},r.a.createElement("button",{className:"slideout",onClick:function(){return o(!s)},role:"tabpanel"},s?r.a.createElement(P.b,null):r.a.createElement(P.a,null))),r.a.createElement("div",{className:"pullout-body"},r.a.createElement("button",{onClick:function(){console.log("Playing montly playlist"),e.togglePlay("spotify:playlist:37i9dQZEVXbMDoHDwVN2tF")}},"Play Global Top 50")))}),B=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t={zIndex:-1,backgroundImage:"url(".concat(this.props.item.album.images[0].url,")")},a={width:100*this.props.progress_ms/this.props.item.duration_ms+"%"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{togglePlay:this.props.togglePlay}),r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("div",{className:"background",style:t}),r.a.createElement("div",{className:"now-playing__img"},r.a.createElement("img",{alt:this.props.item.album.artists?"Now playing ".concat(this.props.item.name," by ").concat("".concat(e.props.item.artists.reduce((function(e,t){return e+t.name+", "}),"")).slice(0,-2)).slice(0,-2):"Nothing currently playing",src:this.props.item.album.images[0].url})),r.a.createElement("div",{className:"now-playing__side"},r.a.createElement("div",{className:"now-playing__name"},this.props.item.name),r.a.createElement("div",{className:"now-playing__artist"},"".concat(this.props.item.artists.reduce((function(e,t){return e+t.name+", "}),"")).slice(0,-2)),r.a.createElement("div",{className:"now-playing__status"},this.props.is_playing?"Playing":"Paused"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress__bar",style:a})),r.a.createElement(w,{className:"control",is_playing:this.props.is_playing,stepBack:this.props.stepBack.bind(this),stepForward:this.props.stepForward.bind(this),togglePlay:this.props.togglePlay.bind(this)}))))}}]),a}(r.a.Component),O=(a(54),a(55),"https://api.spotify.com/v1/me/player/");f.a.setLevel("SILENT");var j=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).stepBack=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2e4,!(e.state.progress_ms<2e4)){t.next=6;break}return t.next=4,d.a.post("".concat(O,"previous"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return f.a.info(e)}));case 4:t.next=8;break;case 6:return t.next=8,d.a.put("".concat(O,"seek"),{},{headers:{Authorization:"Bearer "+e.state.token},params:{position_ms:0}}).catch((function(e){return f.a.info(e)}));case 8:case"end":return t.stop()}}),t)}))),e.stepForward=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("".concat(O,"next"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return f.a.info(e)}));case 2:case"end":return t.stop()}}),t)}))),e.togglePlay=Object(l.a)(c.a.mark((function t(){var a,n=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=n.length>0&&void 0!==n[0]?n[0]:null)){t.next=7;break}return console.log("toPlay",a),t.next=5,d.a.put("".concat(O,"play"),{},{headers:{Authorization:"Bearer "+e.state.token},data:{context_uri:a}}).catch((function(e){return console.log(e)}));case 5:t.next=15;break;case 7:if(!e.state.is_playing){t.next=12;break}return t.next=10,d.a.put("".concat(O,"pause"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return console.log(e)}));case 10:t.next=14;break;case 12:return t.next=14,d.a.put("".concat(O,"play"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return console.log(e)}));case 14:e.setState({is_playing:!e.state.is_playing});case 15:case"end":return t.stop()}}),t)}))),e.getCurrentlyPlaying=function(){var t=Object(l.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.info("Getting current song"),t.next=3,d.a.get(O,{headers:{Authorization:"Bearer "+a}}).then((function(t){t.data?(e.setState({item:t.data.item,is_playing:t.data.is_playing}),Math.abs(e.state.progress_ms-t.data.progress_ms)>2e3&&e.setState({progress_ms:t.data.progress_ms})):e.setState({item:k,progress_ms:0})})).catch((function(e){return f.a.info(JSON.parse(JSON.stringify(e)))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateBar=function(){e.state.token&&e.state.is_playing&&e.setState({progress_ms:e.state.progress_ms+500})},e.tick=function(){e.state.token&&e.getCurrentlyPlaying(e.state.token)},e.onAccessToken=function(t){f.a.info("setting access token ",t),e.setState({token:t}),e.getCurrentlyPlaying(t)},e.state={token:null,item:k,progress_ms:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("spotifyAuthToken");f.a.debug("found token in localstorage",t),t&&(this.setState({token:t}),this.getCurrentlyPlaying(t)),this.barInterval=setInterval((function(){return e.updateBar()}),500),this.interval=setInterval((function(){return e.tick()}),7e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},this.state.token?r.a.createElement(B,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms,stepBack:this.stepBack,stepForward:this.stepForward,togglePlay:this.togglePlay}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Spotify Web Player"),r.a.createElement("h2",null,"Login to view your currently playing songs"),r.a.createElement(v.b,{redirectUri:"http://kevinjiang.ca/Spotify-Web-Player/redirect",clientID:"316e898df20d4a0d8c486499c9dc7abf",scopes:E,onAccessToken:this.onAccessToken}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
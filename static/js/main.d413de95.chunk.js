(this["webpackJsonpspotify-playlist-organizer"]=this["webpackJsonpspotify-playlist-organizer"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/record.6264d8cb.webp"},23:function(e,t,a){e.exports=a(52)},28:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),i=a.n(s),o=(a(28),a(3)),c=a.n(o),l=a(10),u=a(5),p=a(6),m=a(8),g=a(7),h=a(4),d=a.n(h),f=a(2),y=a.n(f),k=a(22),b={album:{images:[{url:a.n(k).a}]},name:"Title",artists:[{name:"No Artist"}],duration_ms:0},v=a(9),_=[v.a.userTopRead,v.a.userReadCurrentlyPlaying,v.a.userModifyPlaybackState],w=(a(48),a(11)),E=(a(49),function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).stepBack=function(){e.props.stepBack()},e.togglePlay=function(){e.props.togglePlay()},e.stepForward=function(){e.props.stepForward()},e}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"controller"},r.a.createElement("button",{onClick:this.stepBack},r.a.createElement(w.d,null)),r.a.createElement("button",{onClick:this.togglePlay,className:"centerButton"}," ",this.props.is_playing?r.a.createElement(w.a,null):r.a.createElement(w.b,null)," "),r.a.createElement("button",{onClick:this.stepForward},r.a.createElement(w.c,null)))}}]),a}(n.Component)),N=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this,t={backgroundImage:"url(".concat(this.props.item.album.images[0].url,")")},a={width:100*this.props.progress_ms/this.props.item.duration_ms+"%"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-wrapper"},r.a.createElement("div",{className:"background",style:t})," ",r.a.createElement("div",{className:"now-playing__img"},r.a.createElement("img",{alt:this.props.item.album.artists?"Now playing ".concat(this.props.item.name," by ").concat("".concat(e.props.item.artists.reduce((function(e,t){return e+t.name+", "}),"")).slice(0,-2)).slice(0,-2):"Nothing currently playing",src:this.props.item.album.images[0].url})),r.a.createElement("div",{className:"now-playing__side"},r.a.createElement("div",{className:"now-playing__name"},this.props.item.name),r.a.createElement("div",{className:"now-playing__artist"},"".concat(this.props.item.artists.reduce((function(e,t){return e+t.name+", "}),"")).slice(0,-2)),r.a.createElement("div",{className:"now-playing__status"},this.props.is_playing?"Playing":"Paused"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress__bar",style:a})),r.a.createElement(E,{className:"control",is_playing:this.props.is_playing,stepBack:this.props.stepBack.bind(this),stepForward:this.props.stepForward.bind(this),togglePlay:this.props.togglePlay.bind(this)}))))}}]),a}(r.a.Component),B=(a(50),a(51),"https://api.spotify.com/v1/me/player/");y.a.setLevel("SILENT");var O=function(e){Object(m.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).stepBack=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(2e4,!(e.state.progress_ms<2e4)){t.next=6;break}return t.next=4,d.a.post("".concat(B,"previous"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return y.a.info(e)}));case 4:t.next=8;break;case 6:return t.next=8,d.a.put("".concat(B,"seek"),{},{headers:{Authorization:"Bearer "+e.state.token},params:{position_ms:0}}).catch((function(e){return y.a.info(e)}));case 8:case"end":return t.stop()}}),t)}))),e.stepForward=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("".concat(B,"next"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return y.a.info(e)}));case 2:case"end":return t.stop()}}),t)}))),e.togglePlay=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.is_playing){t.next=5;break}return t.next=3,d.a.put("".concat(B,"pause"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return y.a.info(e)}));case 3:t.next=7;break;case 5:return t.next=7,d.a.put("".concat(B,"play"),{},{headers:{Authorization:"Bearer "+e.state.token}}).catch((function(e){return y.a.info(e)}));case 7:e.setState({is_playing:!e.state.is_playing});case 8:case"end":return t.stop()}}),t)}))),e.getCurrentlyPlaying=function(){var t=Object(l.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y.a.info("Getting current song"),t.next=3,d.a.get(B,{headers:{Authorization:"Bearer "+a}}).then((function(t){t.data?(e.setState({item:t.data.item,is_playing:t.data.is_playing}),Math.abs(e.state.progress_ms-t.data.progress_ms)>2e3&&e.setState({progress_ms:t.data.progress_ms})):e.setState({item:b,progress_ms:0})})).catch((function(e){return y.a.info(JSON.parse(JSON.stringify(e)))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateBar=function(){e.state.token&&e.state.is_playing&&e.setState({progress_ms:e.state.progress_ms+500})},e.tick=function(){e.state.token&&e.getCurrentlyPlaying(e.state.token)},e.onAccessToken=function(t){y.a.info("setting access token ",t),e.setState({token:t}),e.getCurrentlyPlaying(t)},e.state={token:null,item:b,progress_ms:0},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("spotifyAuthToken");y.a.debug("found token in localstorage",t),t&&(this.setState({token:t}),this.getCurrentlyPlaying(t)),this.barInterval=setInterval((function(){return e.updateBar()}),500),this.interval=setInterval((function(){return e.tick()}),7e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},this.state.token?r.a.createElement(N,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.state.progress_ms,stepBack:this.stepBack,stepForward:this.stepForward,togglePlay:this.togglePlay}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Spotify Web Player"),r.a.createElement("h2",null,"Login to view your currently playing songs"),r.a.createElement(v.b,{redirectUri:"http://localhost:3000/redirect",clientID:"316e898df20d4a0d8c486499c9dc7abf",scopes:_,onAccessToken:this.onAccessToken}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);